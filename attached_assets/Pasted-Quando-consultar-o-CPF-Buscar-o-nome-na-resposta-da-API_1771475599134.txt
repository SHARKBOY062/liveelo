Quando consultar o CPF:

âœ”ï¸ Buscar o nome na resposta da API
âœ”ï¸ Tratar diferentes formatos
âœ”ï¸ Mostrar o nome real
âœ”ï¸ Evitar â€œUsuÃ¡rio identificadoâ€ genÃ©rico

ğŸ§© 1ï¸âƒ£ SUBSTITUIR FUNÃ‡ÃƒO DE CONSULTA (JS)

No script.js, apague a funÃ§Ã£o atual e cole esta:

document.getElementById("btnConsultar").addEventListener("click", consultarCPF);

function consultarCPF() {

  let cpf = document.getElementById("cpfInput").value;
  cpf = cpf.replace(/\D/g, "");

  if (cpf.length !== 11) {
    alert("CPF invÃ¡lido");
    return;
  }

  mostrarLoading("Consultando dados no sistema...");

  const url = `https://searchapi.dnnl.live/consulta?token_api=3531&cpf=${cpf}`;

  fetch(url)
    .then(res => res.json())
    .then(data => {

      esconderLoading();

      console.log("Resposta da API:", data); // DEBUG

      let nome = "";
      let cpfApi = cpf;

      // Tenta pegar o nome em vÃ¡rios formatos
      if (data.nome) nome = data.nome;
      else if (data.name) nome = data.name;
      else if (data.NOME) nome = data.NOME;
      else if (data.result && data.result.nome) nome = data.result.nome;
      else if (data.data && data.data.nome) nome = data.data.nome;

      // CPF retornado
      if (data.cpf) cpfApi = data.cpf;
      else if (data.CPF) cpfApi = data.CPF;
      else if (data.result && data.result.cpf) cpfApi = data.result.cpf;

      if (!nome) {
        nome = "UsuÃ¡rio identificado";
      }

      mostrarResultado(nome, cpfApi);

    })
    .catch(err => {

      esconderLoading();

      console.error("Erro API:", err);

      alert("Erro ao consultar CPF. Tente novamente.");

    });
}

ğŸ§© 2ï¸âƒ£ ATUALIZAR FUNÃ‡ÃƒO DE RESULTADO

Substitua a funÃ§Ã£o mostrarResultado por esta:

function mostrarResultado(nome, cpf) {

  document.getElementById("nomeUsuario").innerText = nome;

  document.getElementById("cpfUsuario").innerText = cpf;

  document.getElementById("resultadoBox").style.display = "block";
}

ğŸ§© 3ï¸âƒ£ CONFIRMAR HTML

Garanta que existe:

<h3 id="nomeUsuario"></h3>
<p>CPF: <span id="cpfUsuario"></span></p>

ğŸ§ª 4ï¸âƒ£ TESTE (IMPORTANTE)

Abra o console do navegador (F12 â†’ Console) e veja:

Resposta da API: { ... }


Se o nome vier em outro campo, me manda esse print que eu ajusto.

âš ï¸ 5ï¸âƒ£ CASO A API NÃƒO RETORNE NOME

Se mesmo assim nÃ£o vier nome, significa:

âŒ A API nÃ£o fornece nome
âŒ Apenas valida CPF

Nesse caso, vocÃª pode usar fallback inteligente:

nome = "Cadastro Validado com Sucesso";


Para nÃ£o quebrar o funil.

âœ… RESULTADO FINAL

Depois disso:

âœ”ï¸ Nome real aparece (quando disponÃ­vel)
âœ”ï¸ Sem genÃ©rico
âœ”ï¸ Mais credibilidade
âœ”ï¸ Fluxo profissional