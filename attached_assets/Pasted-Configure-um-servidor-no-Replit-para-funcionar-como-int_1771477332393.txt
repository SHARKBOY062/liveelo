Configure um servidor no Replit para funcionar como intermedi√°rio (proxy) entre o site e a API de consulta de CPF, resolvendo o bloqueio de CORS e permitindo retornar o nome corretamente.

üéØ OBJETIVO

Atualmente a API externa bloqueia chamadas diretas do navegador.
Crie um backend em Node.js para:

‚úîÔ∏è Consultar a API
‚úîÔ∏è Repassar os dados ao site
‚úîÔ∏è Liberar acesso ao frontend
‚úîÔ∏è Permitir exibir nome pelo CPF

üìå API ORIGINAL
https://searchapi.dnnl.live/consulta?token_api=3531&cpf=CPF_AQUI

üß© 1Ô∏è‚É£ CRIAR ARQUIVO server.js

Criar na raiz do projeto:

const express = require("express");
const fetch = require("node-fetch");

const app = express();

app.get("/api/cpf", async (req, res) => {

  const cpf = req.query.cpf;

  if (!cpf) {
    return res.json({ error: "CPF n√£o informado" });
  }

  const url = `https://searchapi.dnnl.live/consulta?token_api=3531&cpf=${cpf}`;

  try {

    const resposta = await fetch(url);
    const dados = await resposta.json();

    res.json(dados);

  } catch (erro) {

    res.status(500).json({
      error: "Erro ao consultar API"
    });

  }

});

app.listen(3000, () => {
  console.log("Servidor ativo na porta 3000");
});

üß© 2Ô∏è‚É£ INSTALAR DEPEND√äNCIAS

No Shell do Replit, executar:

npm install express node-fetch

üß© 3Ô∏è‚É£ RODAR SERVIDOR

No Shell:

node server.js


Ou configurar como start autom√°tico.

üß© 4Ô∏è‚É£ ALTERAR FRONTEND (script.js)

Substituir a URL da API antiga por:

‚ùå Antiga:

https://searchapi.dnnl.live/consulta


‚úÖ Nova:

/api/cpf?cpf=


Exemplo:

const url = `/api/cpf?cpf=${cpf}`;

üß© 5Ô∏è‚É£ BUSCAR NOME NA RESPOSTA

No JavaScript, usar:

let nome = "";

if (data.nome) nome = data.nome;
else if (data.name) nome = data.name;
else if (data.data?.nome) nome = data.data.nome;
else if (data.result?.nome) nome = data.result.nome;

if (!nome) {
  nome = "Cadastro Validado";
}

üß© 6Ô∏è‚É£ SALVAR DADOS

Salvar no navegador:

localStorage.setItem("nomeUsuario", nome);
localStorage.setItem("cpfUsuario", cpf);

üß© 7Ô∏è‚É£ MOSTRAR NA TELA FINAL

No carregamento da p√°gina:

window.onload = function() {

  document.getElementById("nomeFinal").innerText =
    localStorage.getItem("nomeUsuario");

  document.getElementById("cpfFinal").innerText =
    localStorage.getItem("cpfUsuario");

};

‚úÖ RESULTADO ESPERADO

Ap√≥s implementar:

‚úîÔ∏è API funciona sem bloqueio
‚úîÔ∏è Nome aparece
‚úîÔ∏è CPF v√°lido
‚úîÔ∏è Fluxo completo
‚úîÔ∏è Sistema profissional

‚ö†Ô∏è OBSERVA√á√ÉO

Se a API n√£o retornar nome, exibir fallback:

Cadastro Validado com Sucesso